<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Plants IoT</title>
  <!-- bootstrap stylesheet -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <!-- jquery with ajax -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
<div class="container">
  <!-- Plants Select Box -->
  <form id="plants-form">

    <!-- Label for Text Box -->
    <label for="plant-input">Search for a plant!</label>

    <!-- Text Input Box -->
    <input type="text" id="plant-input"><br>

    <!-- Submit Button -->
    <input id="select-plant" type="submit" value="GO!">
  </form>

  <!-- Plant Information -->
  <div id="plant-div"></div>
</div>
</body>
<script>
function searchPlants(plant) {

// Querying the bandsintown api for the selected artist, the ?app_id parameter is required, but can equal anything
var queryURL = "https://trefle.io/api/species/" + plant + "?token=NE1saU5xaVRnZFZjMUE3L1cwL0phQT09";
$.ajax({
  url: queryURL,
  method: "GET"
}).then(function(response) {
    console.log(queryURL);

  // Printing the entire object to console
    console.log(response);

  // Constructing HTML containing the artist information
  var plantName = $("<h1>").text(response.common_name);
//   var plantThing  = $("<a>").attr("href", response.url).append(artistName);
//   var artistImage = $("<img>").attr("src", response.thumb_url);
//   var trackerCount = $("<h2>").text(response.tracker_count + " fans tracking this artist");
//   var upcomingEvents = $("<h2>").text(response.upcoming_event_count + " upcoming events");
//   var goToArtist = $("<a>").attr("href", response.url).text("See Tour Dates");

  // Empty the contents of the artist-div, append the new artist content
  $("#plant-div").empty();
  $("#plant-div").append(plantName);
});
}

// Event handler for user clicking the select-artist button
$("#select-plant").on("click", function(event) {
console.log("button clicked");
// Preventing the button from trying to submit the form
event.preventDefault();
// Storing the artist name

var inputPlant = $("#plant-input").val().trim();
console.log(inputPlant);

// Running the searchBandsInTown function(passing in the artist as an argument)
searchPlants(inputPlant);
});
</script>